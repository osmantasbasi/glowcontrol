
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>glowcontrol</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta property="og:image" content="/og-image.png" />
    <!-- Polyfill Buffer before any other scripts -->
    <script>
      // Ensure we have global objects needed by polyfills
      window.process = window.process || { env: {} };
    </script>
    <!-- Use the specific Buffer polyfill version from the buffer package -->
    <script src="https://cdn.jsdelivr.net/npm/buffer@6.0.3/index.min.js"></script>
    <script>
      (function ensureBufferImmediately() {
        try {
          // Explicitly set global Buffer from the polyfill
          if (typeof window.buffer !== 'undefined' && window.buffer.Buffer) {
            window.Buffer = window.buffer.Buffer;
            
            // Make sure Buffer.from is available
            if (typeof window.Buffer.from !== 'function') {
              console.error('Buffer.from missing after initial setup');
              // Create Buffer.from if it doesn't exist
              window.Buffer.from = function(data, encoding) {
                return new window.Buffer(data, encoding);
              };
            }
            
            console.log('✓ Buffer.from properly initialized in head script');
            
            // Test Buffer.from to verify it works
            try {
              var testBuffer = window.Buffer.from('test');
              console.log('✓ Buffer.from test successful in head:', testBuffer instanceof Uint8Array);
            } catch (e) {
              console.error('Buffer.from test failed in head:', e);
            }
          } else {
            console.error('buffer polyfill not loaded properly');
          }
        } catch (e) {
          console.error('Error in Buffer setup:', e);
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
